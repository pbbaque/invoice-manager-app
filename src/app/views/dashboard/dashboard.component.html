<div class="page">
  <div class="page__header">
    <h2 class="page__name">Dashboard</h2>
    <p class="page__description">
      Vista general de la facturación, clientes y productos.
    </p>
  </div>

  <div class="page__content">

    <!-- KPIs -->
    <div class="dashboard__kpis">
      <div class="kpi-card">
        <div class="kpi-title">Total facturado</div>
        <div class="kpi-value">{{ totalFacturado | currency }}</div>
      </div>
      <div class="kpi-card">
        <div class="kpi-title">Facturas este mes</div>
        <div class="kpi-value">{{ facturasMes }}</div>
      </div>
      <div class="kpi-card">
        <div class="kpi-title">Facturas hoy</div>
        <div class="kpi-value">{{ facturasHoy }}</div>
      </div>
    </div>

    <!-- Gráfico mensual -->
    <div class="dashboard__chart">
      <!-- <canvas baseChart
        [data]="chartData"
        [labels]="chartLabels"
        [type]="'bar'">
      </canvas> -->
    </div>

    <!-- Listados recientes -->
    <div class="dashboard__lists">
      <div class="recent-list">
        <h3>Últimas facturas</h3>
        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>Cliente</th>
              <th>Total</th>
              <th>Fecha</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let f of ultimasFacturas">
              <td>{{ f.id }}</td>
              <td>{{ f.client.name }} {{ f.client.lastname }}</td>
              <td>{{ f.total | currency }}</td>
              <td>{{ f.date | date:'shortDate' }}</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="recent-list">
        <h3>Top clientes</h3>
        <table>
          <thead>
            <tr>
              <th>Nombre</th>
              <th>Total facturado</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let c of topClientes">
              <td>{{ c.name }} {{ c.lastname }}</td>
              <td>{{ c.totalFacturado | currency }}</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="recent-list">
        <h3>Top productos</h3>
        <table>
          <thead>
            <tr>
              <th>Producto</th>
              <th>Vendidos</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let p of topProductos">
              <td>{{ p.name }}</td>
              <td>{{ p.quantitySold }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

  </div>
</div>
